# 🚨🚨🚨 【重要】ソースファイル必須事項（絶対厳守）

絶対厳守：編集前に必ずルールを読む

本ドキュメントはコーディング用AIエージェント向けの資料です。

## 📝 ソースファイル先頭コメント必須

全てのソースファイル（.ts .tsx）の先頭に必ず以下のコメントを記載：

```typescript
// 絶対厳守：編集前に必ずAI実装ルールを読む
```

既存ファイルにコメントがない場合は必ず追加すること。

## 他のファイルへの参照

**以下のように @<path> の形式で書かれている場合は別のファイルへの参照になりますので、対象ファイルを探して内容を確認してください。**

**以下に記載例を示します。**

@src/app/page.tsx（src/app/page.tsx を参照）
@docs/basic-coding-guidelines.md （docs/basic-coding-guidelines.md を参照）

## プロジェクト構成とモジュール

以下のファイルに記載されております。

Claude Codeは @src/CLAUDE.md を参照してください。

Codexは @src/AGENTS.md を参照してください。

## ビルド・テスト・開発コマンド

- `npm run dev` : ポート 2222 でホットリロード付きの開発サーバーを起動します。
- `npm run build` : 本番向けビルドを生成します。マージ前セルフチェックで実行してください。
- `npm run lint` : Ultracite + Prettier のスタイル検証を行います。修正は `npm run format`。
- `npm run test` : Vitest のユニットテストと Storybook 連携テストを一括実行します。
- `npm run test:coverage` : CI 同等のカバレッジレポートを出力します。
- `npm run storybook` / `npm run chromatic` : UI をローカル確認し、Chromatic にビジュアル差分を送信します。

## **重要な品質管理実行手順**

特別な指示がない場合は **必ず** 以下の順番で品質管理を実行します。

1. `npm run format` を実行してコードをフォーマットする
2. `npm run lint` を実行してコードをチェックする
3. `npm run test` を実行して全てパスする事を確認する
4. Chrome DevTools MCP を使って `http://localhost:2222` にアクセスして表示確認を行う
5. Chrome DevTools MCP を使って `http://localhost:6006/` にアクセスして修正したComponentが正常に表示されるか確認を行う

別途ここに書いてある品質管理手順以外の手順が指示されている場合はそちらを優先してください。

## 関連ドキュメント

### **重要: 基本的なコーディングガイドライン**

必ず以下のドキュメントを参照してから開発を開始してください:

@docs/basic-coding-guidelines.md

### **プロジェクト固有のコーディングガイドライン**

プロジェクト固有のコーディング規約とベストプラクティスについては以下に記載してありますので必ず見てください:

@docs/project-coding-guidelines.md

### **Tailwind CSS 4 コーディングガイドライン**

CSSはTailwind CSS 4を利用しています。以下のコーディングルールをご確認ください。

@docs/tailwind-css-v4-coding-guidelines.md

## GitとGitHubワークフロールール

### GitHubの利用ルール

`gh` コマンドを利用してGitHubへのPRを作成する事が可能です。

許可されている操作は以下の通りです。

- GitHubへのPRの作成
- GitHubへのPRへのコメントの追加
- GitHub Issueへのコメントの追加

### PR作成ルール

- ブランチはユーザーが作成しますので現在のブランチをそのまま利用します
- PRのタイトルは日本語で入力します
- PRの作成先は特別な指示がない場合は `staging` ブランチになります
- PRの説明欄は @.github/PULL_REQUEST_TEMPLATE.md を参考に入力します
- 対応issueがある場合は、PRの説明欄に `#<issue番号>` を記載します
- Issue番号は現在のブランチ名から取得出来ます、例えば `feature/issue7/add-docs` の場合は `7` がIssue番号になります
- PRの説明欄には主に以下の情報を含めてください

#### PRの説明欄に含めるべき情報

- 変更内容の詳細説明よりも、なぜその変更が必要なのかを重視
- 他に影響を受ける機能やAPIエンドポイントがあれば明記

#### 以下の情報はPRの説明欄に記載する事を禁止する

- 1つのissueで1つのPRとは限らないので `fix #issue番号` や `close #issue番号` のようなコメントは禁止します
- 全てのテストをパス、Linter、型チェックを通過などのコメント（テストやCIが通過しているのは当たり前でわざわざ書くべき事ではない）

## コーディング時に利用可能なツールについて

コーディングを効率的に行う為のツールです。必ず以下に目を通してください。

### Serena MCP

コードの検索や編集には Serena MCP を **最優先で使用** してください。

Serena MCPが使えない種類のファイルでは通常の読み取り・編集ツールを利用しても良いです。

### Figma Dev Mode MCP

- Figma Dev Mode MCPサーバーは、画像やSVGアセットを提供するアセットエンドポイントを提供します。
- 重要: Figma Dev Mode MCP サーバーが画像またはSVGのローカルホストソースを返す場合、その画像またはSVGソースを直接使用してください。
- 重要: 新しいアイコンパッケージをインポート/追加しないでください。すべてのアセットはFigmaペイロードに含まれている必要があります。
- 重要: ローカルホストソースが提供されている場合、プレースホルダーを使用または作成しないでください。

### Chrome DevTools MCP

フロントエンドのデバッグを行う際に利用します。

ブラウザ操作やデバッグ用途で利用します。

## **絶対禁止事項**

1. **依頼内容に関係のない無駄な修正を行う行為は絶体に禁止。**
2. **ビジネスロジックが誤っている状態で、テストコードを“上書きしてまで”合格させる行為は絶対に禁止。**
